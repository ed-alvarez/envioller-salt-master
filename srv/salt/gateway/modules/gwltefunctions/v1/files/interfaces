{% from slspath + "/map.jinja" import gwltefunctions_config with context %}
{%- set envio_distro_version = salt.grains.get('envio_distro_version') %}
# Configuration file for network interfaces.
#
# **** DO NOT EDIT THIS FILE ****
#
# This file is managed by Salt via {{ source }}
# This file describes the network interfaces available on your system
# and how to activate them. For more information, see interfaces(5).

# The loopback network interface
auto lo
iface lo inet loopback

# Ethernet/RNDIS gadget (g_ether)
# Used by: /opt/scripts/boot/autoconfigure_usb0.sh
#iface usb0 inet static
#    address 192.168.7.2
#    netmask 255.255.255.252
#    network 192.168.7.0
#    gateway 192.168.7.1

{%- if envio_distro_version == "2021.2.9" %}


auto eth0
{%- if gwltefunctions_config.ethppp_config.ETHCAPE_DISABLE_DHCP == 0 %}
iface eth0 inet dhcp
{%- else %}
iface eth0 inet static
{%- endif %}


#static router ip
auto eth0:1
iface eth0:1 inet static
    address {{ gwltefunctions_config.ethppp_config.ETHSTATIC_CAPE_IP_DEFAULT}}
    netmask {{ gwltefunctions_config.ethppp_config.ETHSTATIC_CAPE_IP_DEFAULT_SUBNET_MASK_INTERFACE_FORMAT}}
#    gateway 192.168.125.1

auto eth1
{%- if gwltefunctions_config.ethppp_config.ETHBBB_DISABLE_DHCP == 0 %}
iface eth1 inet dhcp
{%- else %}
iface eth1 inet static
{%- endif %}


#static router ip
auto eth1:1
iface eth1:1 inet static
    address {{ gwltefunctions_config.ethppp_config.ETHSTATIC_BBB_IP_DEFAULT}}
    netmask {{ gwltefunctions_config.ethppp_config.ETHSTATIC_BBB_IP_DEFAULT_SUBNET_MASK_INTERFACE_FORMAT}}
#    gateway 192.168.125.1



{%- elif envio_distro_version == "2020.7.1" %}

auto eth0
{%- if gwltefunctions_config.ethppp_config.ETHCAPE_DISABLE_DHCP == 0 %}
iface eth0 inet dhcp
{%- else %}
iface eth0 inet static
{%- endif %}

#static router ip
auto eth0:1
iface eth0:1 inet static
    address {{ gwltefunctions_config.ethppp_config.ETHSTATIC_CAPE_IP_DEFAULT}}
    netmask {{ gwltefunctions_config.ethppp_config.ETHSTATIC_CAPE_IP_DEFAULT_SUBNET_MASK_INTERFACE_FORMAT}}
#    gateway 192.168.125.1

auto eth1
{%- if gwltefunctions_config.ethppp_config.ETHBBB_DISABLE_DHCP == 0 %}
iface eth1 inet dhcp
{%- else %}
iface eth1 inet static
{%- endif %}

#static router ip
auto eth1:1
iface eth1:1 inet static
    address {{ gwltefunctions_config.ethppp_config.ETHSTATIC_BBB_IP_DEFAULT}}
    netmask {{ gwltefunctions_config.ethppp_config.ETHSTATIC_BBB_IP_DEFAULT_SUBNET_MASK_INTERFACE_FORMAT}}
#    gateway 192.168.125.1


{%- else %}

auto eth0
{%- if gwltefunctions_config.ethppp_config.ETHCAPE_DISABLE_DHCP == 0 %}
iface eth0 inet dhcp
{%- else %}
iface eth0 inet static
{%- endif %}


#static router ip
auto eth0:1
iface eth0:1 inet static
    address {{ gwltefunctions_config.ethppp_config.ETHSTATIC_CAPE_IP_DEFAULT}}
    netmask {{ gwltefunctions_config.ethppp_config.ETHSTATIC_CAPE_IP_DEFAULT_SUBNET_MASK_INTERFACE_FORMAT}}
#    gateway 192.168.125.1

{%- endif %}
